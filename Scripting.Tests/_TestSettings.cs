using System;
using Scripting.Js.v1;

namespace Scripting.Tests
{
    public static class Scripting_TestSettings
    {
        public const bool SkipNodeTests = false;
        public const string ScriptingContextName = "_scriptingContext";
        public const string ScriptsPath_JsScripts = "Scripting.JsScripts.v1";
        public const string ScriptsPath_Tests = "Scripting.Tests";
        public const string ScriptsPath_Tests_ES5 = "InMemoryFiles + RealFs tests/Jint ES5/ES5_scripts_to_zip_plus_to_encode_in_Base64";
        public const string NodeExeCmdLine = "node.exe";
        public static InMemoryScript MyRequireEs6 = InMemoryScript.FromTextFileEncodedInBase64("myrequire", @"Ly8gdGhpcyBjb2RlIG11c3Qgbm90IGJlIGNhbGxlZC9yZWZlcmVuY2VkIGRpcmVjdGx5IGJ5IHN0YXJ0dXAgcHJvZ3JhbSAoYXMgbWFpbi5qcykNCi8vIHRoaXMgY29kZSBpcyBub3QgcmVxdWlyZWQgYnkgbm9kZS5qcw0KLy8gdGhpcyBjb2RlIGlzIHJlcXVpcmVkIGJ5IEMjLCB0aGF0IG11c3QgcnVuIGl0IEJFRk9SRSBhbnkgY2FsbGluZyBhbnkgb3RoZXIgSmF2YVNjcmlwdCBjb2RlIHVzaW5nIENvbW1vbkpzL05vZGUuanMgbW9kdWxlcw0KDQovLyBpc3BpcmVkIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9zdGVmYW5vNzdpdC9yZXF1aXJlLWV4YW1wbGUgKGZvcmtlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9tdXNpa2VsZS9yZXF1aXJlLWV4YW1wbGUvICkNCi8vIGluc3BpcmF0aW9uIGNvZGUgcHVibGlzaGVkIGFuZCBjb21tZW50ZWQgaW4gaHR0cHM6Ly9taWNoZWxlbmFzdGkuY29tLzIwMTgvMTAvMDIvbGV0LXMtd3JpdGUtYS1zaW1wbGUtdmVyc2lvbi1vZi10aGUtcmVxdWlyZS1mdW5jdGlvbi5odG1sIA0KDQpmdW5jdGlvbiBzZXRSZXF1aXJlKCkgew0KICAgIGlmICh0eXBlb2YgcmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcpIHsgIC8vIGlmIHJlcXVpcmUgaXMgZGVmaW5lZCwgcmV0dXJuIGl0DQogICAgICAgIHJldHVybiByZXF1aXJlOw0KICAgIH0NCiAgICBlbHNlIHsgIC8vIGlmIHJlcXVpcmUgaXMgbm90IGRlZmluZWQsIGJ1aWxkIGl0DQogICAgICAgIGNvbnN0IGxpYnJhcnlQYXRoID0gJy4vbGliLyc7DQoNCiAgICAgICAgaWYgKHR5cGVvZiBfc2NyaXB0aW5nQ29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHsgdGhyb3cgJ19zY3JpcHRpbmdDb250ZXh0IG5vdCBkZWZpbmVkJzsgfQ0KDQogICAgICAgIGNvbnN0IHJlYWRGaWxlID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIF9zY3JpcHRpbmdDb250ZXh0LlJlYWRGaWxlKG5hbWUpIH07DQoNCiAgICAgICAgY29uc3QgcmVxdWlyZUNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTsNCg0KICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coYEV2YWx1YXRpbmcgZmlsZSAke25hbWV9YCk7DQogICAgICAgICAgICBpZiAocmVxdWlyZWRGaWxlSXNBTGlicmFyeShuYW1lKSkgeyBuYW1lID0gbGlicmFyeVBhdGggKyBuYW1lOyB9DQogICAgICAgICAgICBpZiAocmVxdWlyZWRGaWxlSXNNaXNzaW5nRXh0ZW5zaW9uKG5hbWUpKSB7IG5hbWUgPSBuYW1lICsgJy5qcyc7IH0NCiAgICAgICAgICAgIGlmICghKG5hbWUgaW4gcmVxdWlyZUNhY2hlKSkgew0KICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYCR7bmFtZX0gaXMgbm90IGluIGNhY2hlOyByZWFkaW5nIGZyb20gZGlza2ApOw0KICAgICAgICAgICAgICAgIGxldCBjb2RlID0gcmVhZEZpbGUobmFtZSk7DQogICAgICAgICAgICAgICAgbGV0IG1vZHVsZSA9IHsgZXhwb3J0czoge30gfTsNCiAgICAgICAgICAgICAgICByZXF1aXJlQ2FjaGVbbmFtZV0gPSBtb2R1bGU7DQogICAgICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSBGdW5jdGlvbigncmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlJywgY29kZSk7DQogICAgICAgICAgICAgICAgd3JhcHBlcihyZXF1aXJlLCBtb2R1bGUuZXhwb3J0cywgbW9kdWxlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgJHtuYW1lfSBpcyBpbiBjYWNoZS4gUmV0dXJuaW5nIGl0Li4uYCk7DQogICAgICAgICAgICByZXR1cm4gcmVxdWlyZUNhY2hlW25hbWVdLmV4cG9ydHM7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiByZXF1aXJlZEZpbGVJc0FMaWJyYXJ5KG5hbWUpIHsNCiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnRyaW0oKTsNCiAgICAgICAgICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJy4vJykpIHsgcmV0dXJuIGZhbHNlOyB9DQogICAgICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKCcuLi8nKSkgeyByZXR1cm4gZmFsc2U7IH0NCiAgICAgICAgICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJy5cXCcpKSB7IHJldHVybiBmYWxzZTsgfQ0KICAgICAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgnLi5cXCcpKSB7IHJldHVybiBmYWxzZTsgfQ0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiByZXF1aXJlZEZpbGVJc01pc3NpbmdFeHRlbnNpb24obmFtZSkgew0KICAgICAgICAgICAgbmFtZSA9IG5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICBpZiAobmFtZS5lbmRzV2l0aCgnLmpzJykpIHsgcmV0dXJuIGZhbHNlOyB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KdmFyIHJlcXVpcmUgPSBzZXRSZXF1aXJlKCk7DQo=");
        public static InMemoryScript MyRequireEs5 = InMemoryScript.FromTextFileEncodedInBase64("myrequire", @"Ly8gY29udmVydGVkIHdpdGggQmFiZWxqcywgZXMyMDE1IHNldHRpbmdzDQovLyArIGN1c3RvbSBlZGl0cw0KDQoidXNlIHN0cmljdCI7DQoNCi8vIHRoaXMgY29kZSBtdXN0IG5vdCBiZSBjYWxsZWQvcmVmZXJlbmNlZCBkaXJlY3RseSBieSBzdGFydHVwIHByb2dyYW0gKGFzIG1haW4uanMpDQovLyB0aGlzIGNvZGUgaXMgbm90IHJlcXVpcmVkIGJ5IG5vZGUuanMNCi8vIHRoaXMgY29kZSBpcyByZXF1aXJlZCBieSBDIywgdGhhdCBtdXN0IHJ1biBpdCBCRUZPUkUgYW55IGNhbGxpbmcgYW55IG90aGVyIEphdmFTY3JpcHQgY29kZSB1c2luZyBDb21tb25Kcy9Ob2RlLmpzIG1vZHVsZXMNCi8vIGlzcGlyZWQgdG8gaHR0cHM6Ly9naXRodWIuY29tL3N0ZWZhbm83N2l0L3JlcXVpcmUtZXhhbXBsZSAoZm9ya2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL211c2lrZWxlL3JlcXVpcmUtZXhhbXBsZS8gKQ0KLy8gaW5zcGlyYXRpb24gY29kZSBwdWJsaXNoZWQgYW5kIGNvbW1lbnRlZCBpbiBodHRwczovL21pY2hlbGVuYXN0aS5jb20vMjAxOC8xMC8wMi9sZXQtcy13cml0ZS1hLXNpbXBsZS12ZXJzaW9uLW9mLXRoZS1yZXF1aXJlLWZ1bmN0aW9uLmh0bWwgDQpmdW5jdGlvbiBzZXRSZXF1aXJlKCkgew0KICAgIGlmICh0eXBlb2YgcmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgLy8gaWYgcmVxdWlyZSBpcyBkZWZpbmVkLCByZXR1cm4gaXQNCiAgICAgICAgcmV0dXJuIHJlcXVpcmU7DQogICAgfSBlbHNlIHsNCiAgICAgICAgdmFyIHJlcXVpcmVkRmlsZUlzQUxpYnJhcnkgPSBmdW5jdGlvbiByZXF1aXJlZEZpbGVJc0FMaWJyYXJ5KG5hbWUpIHsNCiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnRyaW0oKTsNCg0KICAgICAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgnLi8nKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgnLi4vJykpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJy5cXCcpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKCcuLlxcJykpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9Ow0KDQogICAgICAgIHZhciByZXF1aXJlZEZpbGVJc01pc3NpbmdFeHRlbnNpb24gPSBmdW5jdGlvbiByZXF1aXJlZEZpbGVJc01pc3NpbmdFeHRlbnNpb24obmFtZSkgew0KICAgICAgICAgICAgbmFtZSA9IG5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7DQoNCiAgICAgICAgICAgIGlmIChuYW1lLmVuZHNXaXRoKCcuanMnKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gaWYgcmVxdWlyZSBpcyBub3QgZGVmaW5lZCwgYnVpbGQgaXQNCiAgICAgICAgdmFyIGxpYnJhcnlQYXRoID0gJy4vbGliLyc7DQoNCiAgICAgICAgaWYgKHR5cGVvZiBfc2NyaXB0aW5nQ29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgIHRocm93ICdfc2NyaXB0aW5nQ29udGV4dCBub3QgZGVmaW5lZCc7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgcmVhZEZpbGUgPSBmdW5jdGlvbiByZWFkRmlsZShuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gX3NjcmlwdGluZ0NvbnRleHQuUmVhZEZpbGUobmFtZSk7DQogICAgICAgIH07DQoNCiAgICAgICAgdmFyIHJlcXVpcmVDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7DQogICAgICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgRXZhbHVhdGluZyBmaWxlICR7bmFtZX1gKTsNCiAgICAgICAgICAgIGlmIChyZXF1aXJlZEZpbGVJc0FMaWJyYXJ5KG5hbWUpKSB7DQogICAgICAgICAgICAgICAgbmFtZSA9IGxpYnJhcnlQYXRoICsgbmFtZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHJlcXVpcmVkRmlsZUlzTWlzc2luZ0V4dGVuc2lvbihuYW1lKSkgew0KICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lICsgJy5qcyc7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghKG5hbWUgaW4gcmVxdWlyZUNhY2hlKSkgew0KICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYCR7bmFtZX0gaXMgbm90IGluIGNhY2hlOyByZWFkaW5nIGZyb20gZGlza2ApOw0KICAgICAgICAgICAgICAgIHZhciBjb2RlID0gcmVhZEZpbGUobmFtZSk7DQogICAgICAgICAgICAgICAgdmFyIG1vZHVsZSA9IHsNCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0czoge30NCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHJlcXVpcmVDYWNoZVtuYW1lXSA9IG1vZHVsZTsNCiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IEZ1bmN0aW9uKCdyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUnLCBjb2RlKTsNCiAgICAgICAgICAgICAgICB3cmFwcGVyKHJlcXVpcmUsIG1vZHVsZS5leHBvcnRzLCBtb2R1bGUpOw0KICAgICAgICAgICAgfSAvL2NvbnNvbGUubG9nKGAke25hbWV9IGlzIGluIGNhY2hlLiBSZXR1cm5pbmcgaXQuLi5gKTsNCg0KDQogICAgICAgICAgICByZXR1cm4gcmVxdWlyZUNhY2hlW25hbWVdLmV4cG9ydHM7DQogICAgICAgIH07DQogICAgfQ0KfQ0KDQp2YXIgcmVxdWlyZSA9IHNldFJlcXVpcmUoKTs=");
    }
}
